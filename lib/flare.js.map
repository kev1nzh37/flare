{"version":3,"file":"flare.min.js.map","sources":["../src/until/index.ts","../src/report.ts","../src/onerror.ts","../src/init.ts","../src/index.ts"],"sourcesContent":["export const isObj = (obj: any) => {\n  return typeof obj === 'object' && !!obj\n}\n\nexport const isWindow = (): boolean => {\n  return window !== undefined\n}\n","import { _config } from './init'\nimport { ReportSub } from './interface'\nimport { initListenr, addError } from './error-observer'\n\nlet _onReport: ReportSub = sendErrReport\n\nexport function readySendErrReport(onReport: ReportSub): void {\n  if (!onReport) {\n    console.error('required onReport in auto mode.')\n    return\n  }\n\n  _onReport = _onReport\n  watchTheError()\n}\n\nfunction sendErrReport(errJsonData: string): void {\n  console.log(errJsonData)\n}\n\nfunction watchTheError(): void {\n  initListenr((method, errObj) => {\n    console.log('监听errlist, 获得消息了', method, errObj)\n\n    if (method === 'add' && errObj !== null) {\n      _onReport(JSON.stringify(errObj))\n    }\n  })\n\n\n}\n","let INITONERROT = false\nlet OldOnerror: null | OnErrorEventHandlerNonNull = null\n\nexport const initOneError = (): void => installOneError()\n\nfunction installOneError(): void {\n  if (INITONERROT === true) {\n    console.warn('onerror is inited.')\n    return\n  }\n\n  OldOnerror = window.onerror\n\n  window.onerror = (message, url, lineNo, columnNo, errorObj) => {\n//     console.log(message, url, lineNo, columnNo, errorObj)\n    console.log('meesage: ', message)\n    console.log('url: ', url)\n    console.log('lineNo: ', lineNo)\n    console.log('columnNo: ', columnNo)\n    console.log('errorObj: ', errorObj)\n  }\n}\n","import { Config, InitObj } from './interface'\nimport { isObj, isWindow } from './until'\nimport { readySendErrReport } from './report'\nimport { initOneError } from './onerror'\n\nexport function Init(initObj: InitObj): void {\n  const { config, onReport } = initObj\n\n  if (!isWindow()) {\n    console.error('not in web')\n    return\n  }\n\n  if (isObj(config) && isWindow) {\n    const { locationHref } = config\n    _config.locationHref = locationHref || window.location.href\n  }\n\n  readySendErrReport(onReport)\n  initOneError()\n}\n\nexport const _config: Config = {\n  auto: false\n}\n","import { Flare } from './interface/index'\nimport { Init, _config as config } from './init'\n\nconst flare: Flare = {\n  Init,\n  config\n}\n\nexport { flare }\n"],"names":[],"mappings":";;;;AAAO,IAAM,KAAK,GAAG,UAAC,GAAQ;IAC5B,OAAO,OAAO,GAAG,KAAK,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAA;AACzC,CAAC,CAAA;AAEM,IAAM,QAAQ,GAAG;IACtB,OAAO,MAAM,KAAK,SAAS,CAAA;AAC7B,CAAC;;SCAe,kBAAkB,CAAC,QAAmB;IACpD,IAAI,CAAC,QAAQ,EAAE;QACb,OAAO,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAA;QAChD,OAAM;KACP;AAIH;;ACXO,IAAM,YAAY,GAAG,cAAY,OAAA,eAAe,EAAE,GAAA,CAAA;AAEzD,SAAS,eAAe;IAQtB,MAAM,CAAC,OAAO,GAAG,UAAC,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ;;QAExD,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC,CAAA;QACjC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAA;QACzB,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,CAAA;QAC/B,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAA;QACnC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAA;KACpC,CAAA;AACH;;SChBgB,IAAI,CAAC,OAAgB;IAC3B,IAAA,MAAM,GAAe,OAAO,OAAtB,EAAE,QAAQ,GAAK,OAAO,SAAZ,CAAY;IAEpC,IAAI,CAAC,QAAQ,EAAE,EAAE;QACf,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAA;QAC3B,OAAM;KACP;IAED,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,QAAQ,EAAE;QACrB,IAAA,YAAY,GAAK,MAAM,aAAX,CAAW;QAC/B,OAAO,CAAC,YAAY,GAAG,YAAY,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAA;KAC5D;IAED,kBAAkB,CAAC,QAAQ,CAAC,CAAA;IAC5B,YAAY,EAAE,CAAA;AAChB,CAAC;AAEM,IAAM,OAAO,GAAW;IAC7B,IAAI,EAAE,KAAK;CACZ;;ICrBK,KAAK,GAAU;IACnB,IAAI,MAAA;IACJ,MAAM,SAAA;;;;;"}